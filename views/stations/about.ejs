<!DOCTYPE html>
<html>
  <head>
    <title>엘리베이터 위치</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyAYtQfNGdVhFqHsQt0OgLjojPwkM5M5aM8" ></script>
    <style>
      #map_ma {width:100%; height:400px; clear:both; border:solid 1px red;}

      .favorite_button {
        border-radius: 3rem;
        background-color: #0a0a23;
        color: #fff;
        border:none;
      }
      p {
        border-width: 8px;
        border-style: solid;
        border-color: rgb(3, 3, 3);
        padding: 12px;
        background-color: aliceblue;
        border-radius: 3rem;
        /* 축약형 */
        border: 5px solid rgba(0, 1, 2, 0);
      }
    </style>
    <%- include('../partials/head') %>
  </head>
  <body>
    <%- include('../partials/nav') %>

    <div class="container mb-3">
      <div class="container px-4 py-5" id="icon-grid">
        <div>
        <h2 class="pb-2 border-bottom"><%= station_name %>역</h2>


        <div>최대 3개까지 입력 가능합니다. </div>
        <div> 
         <%= currentUser.favorites%>
         
        </div>

          <div>
            <%if(currentUser.favorites.includes(station_name)){ %>
              <div>                  
                <button type="submit"
                class="favorite_button" type="submit" name="delete_button"
               onclick="location.href='/users/delete/<%= currentUser.username %>?subway_name=<%= station_name %>'"> 삭제</button>
                        </div>
              <% }
              else{  %>
                <div>                  
                  <button type="submit"
                  class="favorite_button" type="submit" name="add_button"
                 onclick="location.href='/users/<%= currentUser.username %>?subway_name=<%= station_name %>'"> 즐겨찾는 역으로 등록</button>
                          </div>
             <% } %> 
          
          
          </div>




        <!--<p><%= line_number %>호선</p>-->

        <div
          class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4 py-5"
        >
          <div class="col d-flex align-items-start">
            <svg
              class="bi text-muted flex-shrink-0 me-3"
              width="1.75em"
              height="1.75em"
            >
              <use xlink:href="#home" />
            </svg>
            <div>
              <h4 class="fw-bold mb-0"></h4>

              <p>현재 <%= station_name %>의 미세먼지 정도는 <%= dust_state %>이에요.</p>
            </div>
          </div>
          <div class="col d-flex align-items-start">
            <svg
              class="bi text-muted flex-shrink-0 me-3"
              width="1.75em"
              height="1.75em"
            >
              <use xlink:href="#bootstrap" />
            </svg>
            <div>
              <!-- 아직 불러오지 않은 부분 -->
              <p>
                물품 보관함의 위치는 6번 출구 주변, 2번 출구 주변, 5번 출구
                주변이에요
              </p>
              <p>한아름 빌딩이 있습니다.</p>
            </div>


 
          </div>

          <div class="col d-flex align-items-start">
            <svg
              class="bi text-muted flex-shrink-0 me-3"
              width="1.75em"
              height="1.75em"
            >
              <use xlink:href="#calendar3" />
            </svg>
            <div>
              <p>
                <i class="fa-regular fa-face-smile"></i>

                현재 <%= station_name %>은 <%= complexity_state %>한 편이에요!
              </p>
            </div>

          </div>
        
        </div>
      </div>
      
      <div>
        <div>엘리베이터 위치 </div>
        <div id="map_ma"></div>
        <script type="text/javascript">
          $(document).ready(function() {
            var myLatlng = new google.maps.LatLng(37.539922,127.070609); // 위치값 위도 경도
        var Y_point			= 37.539922;		// Y 좌표
        var X_point			= 127.070609;		// X 좌표
        var zoomLevel		= 18;				// 지도의 확대 레벨 : 숫자가 클수록 확대정도가 큼
        var markerTitle		= "엘리베이터";		// 현재 위치 마커에 마우스를 오버을때 나타나는 정보
        var markerMaxWidth	= 300;				// 마커를 클릭했을때 나타나는 말풍선의 최대 크기
      
      // 말풍선 내용
        var contentString	= '<div>' +
        '<h2>엘리베이터</h2>'+
        '<p>이 위치에 엘리베이터가 있습니다.</p>' +
        
        '</div>';
        var myLatlng = new google.maps.LatLng(Y_point, X_point);
        var mapOptions = {
                  zoom: zoomLevel,
                  center: myLatlng,
                  mapTypeId: google.maps.MapTypeId.ROADMAP
                }
        var map = new google.maps.Map(document.getElementById('map_ma'), mapOptions);
        var marker = new google.maps.Marker({
                            position: myLatlng,
                            map: map,
                            title: markerTitle
        });
        var infowindow = new google.maps.InfoWindow(
                              {
                                content: contentString,
                                maxWizzzdth: markerMaxWidth
                              }
            );
        google.maps.event.addListener(marker, 'click', function() {
          infowindow.open(map, marker);
        });
      });
          </script>

      </div>
     
    </div>
  </body>
</html>